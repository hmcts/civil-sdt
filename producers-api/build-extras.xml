<!-- ===========================================================================
 = MCOL
 =
 = Name:    	build.xml
 = Description: Build file to build extra artefacts specific to a particular project.
 =
 = $Revision: $
 = $Author: $
 = $Date: $
 = $URL: $
 =
 = Copyright Logica UK Ltd. 2012
 =========================================================================== -->

<project name="producers-api-extras" basedir=".">

    <!-- Calls extra build distribution targets required by this project. -->
    <target name="dist-extras" depends="" description="Run extra targets for this project">
        <echo level="info" message="Running dist extra targets for project: ${ant.project.name}" />
    </target>

    <!-- Calls extra build deploy targets required by this project. -->
    <target name="deploy-extras" depends="" description="Run extra targets for this project">
        <echo level="info" message="Running deploy extra targets for project: ${ant.project.name}" />
    </target>

    <!-- Calls extra distribution targets required by this project. -->
    <target name="dist-ws-contract-extras" depends="dist-ws-contract-gateway, dist-ws-contract-client, dist-ws-contract-all" description="Run extra targets for this project">
        <echo level="info" message="Running dist extra targets for project: ${ant.project.name}" />
    </target>

   <!-- Generate SDT Wsdl/Xsd distribution for Gateway -->
    <target name="dist-ws-contract-gateway" description="Zip SDT Wsdl for distribution to System Gateway team">
        <delete dir="${target.dir}/${sdt-ws-contract-dist.dir}"/>
        <copy todir="${target.dir}/${sdt-ws-contract-dist.dir}/wsdl" overwrite="true">
            <filelist dir="${producers-api.dir}/${resources.dir}/wsdl">
                <file name="SdtGatewayEndpoint.wsdl"/>
            </filelist>
        </copy>
        <delete file="${target.dir}/${sdt-ws-contract-dist-gateway.zip}"/>
        <zip destfile="${target.dir}/${sdt-ws-contract-dist-gateway.zip}" basedir="${target.dir}/${sdt-ws-contract-dist.dir}" />
        <delete dir="${target.dir}/${sdt-ws-contract-dist.dir}"/>
    </target>

   <!-- Generate SDT Wsdl/Xsd distribution for bulk clients -->
    <target name="dist-ws-contract-client" description="Zip SDT Wsdl and Xsd for distribution to bulk clients">
        <delete dir="${target.dir}/${sdt-ws-contract-dist.dir}"/>
        <copy todir="${target.dir}/${sdt-ws-contract-dist.dir}/wsdl" overwrite="true">
            <filelist dir="${producers-api.dir}/${resources.dir}/wsdl">
                <file name="SdtEndpointDist.wsdl"/>
            </filelist>
        </copy>
        <copy todir="${target.dir}/${sdt-ws-contract-dist.dir}/xsd/BulkRequestResponse" overwrite="true">
            <filelist dir="${producers-api.dir}/${resources.dir}/xsd/BulkRequestResponse">
                <file name="BulkSubmitRequest.xsd" />
                <file name="BulkSubmitResponse.xsd" />
            </filelist>
        </copy>
        <copy todir="${target.dir}/${sdt-ws-contract-dist.dir}/xsd/RequestBulkFeedback" overwrite="true">
            <filelist dir="${producers-api.dir}/${resources.dir}/xsd/RequestBulkFeedback">
                <file name="BulkFeedbackRequest.xsd" />
                <file name="BulkFeedbackResponse.xsd" />
            </filelist>
        </copy>
        <copy todir="${target.dir}/${sdt-ws-contract-dist.dir}/xsd/SubmitQueryRequestResponse" overwrite="true">
            <filelist dir="${producers-api.dir}/${resources.dir}/xsd/SubmitQueryRequestResponse">
                <file name="SubmitQueryRequest.xsd" />
                <file name="SubmitQueryResponse.xsd" />
            </filelist>
        </copy>
        <copy todir="${target.dir}/${sdt-ws-contract-dist.dir}/xsd/RootXSDs" overwrite="true">
            <filelist dir="${producers-api.dir}/${resources.dir}/xsd/RootXSDs">
                <file name="Base.xsd" />
                <file name="Claim.xsd" />
                <file name="ClaimStatusUpdate.xsd" />
                <file name="Judgment.xsd" />
                <file name="McolQuery.xsd" />
                <file name="McolResponseDetail.xsd" />
                <file name="Warrant.xsd" />
            	<file name="SetAside.xsd" />
                <file name="BreathingSpace.xsd" />
            </filelist>
        </copy>
        <delete file="${target.dir}/${sdt-ws-contract-dist-client.zip}"/>
        <zip destfile="${target.dir}/${sdt-ws-contract-dist-client.zip}" basedir="${target.dir}/${sdt-ws-contract-dist.dir}" />
        <delete dir="${target.dir}/${sdt-ws-contract-dist.dir}"/>
    </target>

   <!-- Generate SDT Wsdl/Xsd distribution containing all files -->
    <target name="dist-ws-contract-all" description="Zip All SDT Wsdl and Xsd">
        <delete dir="${target.dir}/${sdt-ws-contract-dist.dir}"/>
    	<copy todir="${target.dir}/${sdt-ws-contract-dist.dir}/wsdl" overwrite="true">
            <fileset dir="${producers-api.dir}/${resources.dir}/wsdl" casesensitive="false">
                <include name="**/*.wsdl" />
            </fileset>
        </copy>
        <copy todir="${target.dir}/${sdt-ws-contract-dist.dir}/xsd" overwrite="true">
            <fileset dir="${producers-api.dir}/${resources.dir}/xsd" casesensitive="false">
                <include name="**/*.xsd" />
            </fileset>
        </copy>
        <delete file="${target.dir}/${sdt-ws-contract-dist-all.zip}"/>
        <zip destfile="${target.dir}/${sdt-ws-contract-dist-all.zip}" basedir="${target.dir}/${sdt-ws-contract-dist.dir}" />
        <delete dir="${target.dir}/${sdt-ws-contract-dist.dir}"/>
    </target>

</project>
